# Multilingual support dictionary
LANGUAGE_TRANSLATIONS = {
    "hindi": {
        "I am an AI assistant": "मैं एक AI सहायक हूँ",
        "Please consult a lawyer": "कृपया एक वकील से परामर्श करें",
        "for serious or urgent matters": "गंभीर या जरूरी मामलों के लिए",
        "How can I help you today?": "मैं आपकी कैसे सहायता कर सकता हूँ?",
        "Rights during arrest": "गिरफ्तारी के दौरान अधिकार",
        "How to file an FIR?": "FIR कैसे दर्ज करें?",
        "Consumer complaint process": "उपभोक्ता शिकायत प्रक्रिया",
        "RTI application procedure": "RTI आवेदन प्रक्रिया",
        "Legal Documents": "कानूनी दस्तावेज़",
        "Legal Timelines": "कानूनी समयरेखा",
        "Nearby Resources": "आस-पास के संसाधन",
        "Ask a legal question...": "एक कानूनी प्रश्न पूछें..."
    },
    "kannada": {
        "I am an AI assistant": "ನಾನು ಒಂದು AI ಸಹಾಯಕ",
        "Please consult a lawyer": "ದಯವಿಟ್ಟು ವಕೀಲರನ್ನು ಸಂಪರ್ಕಿಸಿ",
        "for serious or urgent matters": "ಗಂಭೀರ ಅಥವಾ ತುರ್ತು ವಿಷಯಗಳಿಗಾಗಿ",
        "How can I help you today?": "ನಾನು ಇಂದು ನಿಮಗೆ ಹೇಗೆ ಸಹಾಯ ಮಾಡಬಹುದು?",
        "Rights during arrest": "ಸೆರೆಹಿಡಿಯುವ ಸಮಯದಲ್ಲಿ ಹಕ್ಕುಗಳು",
        "How to file an FIR?": "FIR ಅನ್ನು ಹೇಗೆ ದಾಖಲಿಸುವುದು?",
        "Consumer complaint process": "ಗ್ರಾಹಕ ದೂರು ಪ್ರಕ್ರಿಯೆ",
        "RTI application procedure": "RTI ಅರ್ಜಿ ಪ್ರಕ್ರಿಯೆ",
        "Legal Documents": "ಕಾನೂನು ದಾಖಲೆಗಳು",
        "Legal Timelines": "ಕಾನೂನು ಸಮಯರೇಖೆ",
        "Nearby Resources": "ಹತ್ತಿರದ ಸಂಪನ್ಮೂಲಗಳು",
        "Ask a legal question...": "ಕಾನೂನು ಪ್ರಶ್ನೆಯನ್ನು ಕೇಳಿ..."
    },
    "bengali": {
        "I am an AI assistant": "আমি একটি AI সহায়ক",
        "Please consult a lawyer": "অনুগ্রহ করে একজন আইনজীবীর সাথে পরামর্শ করুন",
        "for serious or urgent matters": "গুরুতর বা জরুরি বিষয়ের জন্য",
        "How can I help you today?": "আমি আপনাকে আজ কীভাবে সাহায্য করতে পারি?",
        "Rights during arrest": "গ্রেপ্তারের সময় অধিকার",
        "How to file an FIR?": "FIR কীভাবে দায়ের করবেন?",
        "Consumer complaint process": "ভোক্তা অভিযোগ প্রক্রিয়া",
        "RTI application procedure": "RTI আবেদন পদ্ধতি",
        "Legal Documents": "আইনি নথি",
        "Legal Timelines": "আইনি সময়রেখা",
        "Nearby Resources": "কাছাকাছি সম্পদ",
        "Ask a legal question...": "একটি আইনি প্রশ্ন জিজ্ঞাসা করুন..."
    },
    "tamil": {
        "I am an AI assistant": "நான் ஒரு AI உதவியாளர்",
        "Please consult a lawyer": "தயவுசெய்து ஒரு வழக்கறிஞரை அணுகவும்",
        "for serious or urgent matters": "தீவிரமான அல்லது அவசரமான விஷயங்களுக்கு",
        "How can I help you today?": "இன்று நான் உங்களுக்கு எவ்வாறு உதவ முடியும்?",
        "Rights during arrest": "கைது செய்யப்படும் போது உரிமைகள்",
        "How to file an FIR?": "FIR எப்படி தாக்கல் செய்வது?",
        "Consumer complaint process": "நுகர்வோர் புகார் செயல்முறை",
        "RTI application procedure": "RTI விண்ணப்ப நடைமுறை",
        "Legal Documents": "சட்ட ஆவணங்கள்",
        "Legal Timelines": "சட்ட கால வரிசை",
        "Nearby Resources": "அருகிலுள்ள வளங்கள்",
        "Ask a legal question...": "ஒரு சட்ட கேள்வியைக் கேளுங்கள்..."
    },
    "telugu": {
        "I am an AI assistant": "నేను AI సహాయకుడిని",
        "Please consult a lawyer": "దయచేసి న్యాయవాదిని సంప్రదించండి",
        "for serious or urgent matters": "తీవ్రమైన లేదా అత్యవసర విషయాల కోసం",
        "How can I help you today?": "నేను మీకు ఈరోజు ఎలా సహాయం చేయగలను?",
        "Rights during arrest": "అరెస్ట్ సమయంలో హక్కులు",
        "How to file an FIR?": "FIR ఎలా దాఖలు చేయాలి?",
        "Consumer complaint process": "వినియోగదారు ఫిర్యాదు ప్రక్రియ",
        "RTI application procedure": "RTI దరఖాస్తు విధానం",
        "Legal Documents": "చట్టపరమైన పత్రాలు",
        "Legal Timelines": "చట్టపరమైన కాలక్రమాలు",
        "Nearby Resources": "సమీప వనరులు",
        "Ask a legal question...": "చట్టపరమైన ప్రశ్న అడగండి..."
    },
    "marathi": {
        "I am an AI assistant": "मी एक AI सहाय्यक आहे",
        "Please consult a lawyer": "कृपया वकिलाचा सल्ला घ्या",
        "for serious or urgent matters": "गंभीर किंवा तातडीच्या बाबींसाठी",
        "How can I help you today?": "मी आज आपली कशी मदत करू शकतो?",
        "Rights during arrest": "अटक करताना अधिकार",
        "How to file an FIR?": "FIR कसे दाखल करावे?",
        "Consumer complaint process": "ग्राहक तक्रार प्रक्रिया",
        "RTI application procedure": "RTI अर्ज प्रक्रिया",
        "Legal Documents": "कायदेशीर कागदपत्रे",
        "Legal Timelines": "कायदेशीर कालरेषा",
        "Nearby Resources": "जवळपासचे स्त्रोत",
        "Ask a legal question...": "एक कायदेशीर प्रश्न विचारा..."
    },
    "gujarati": {
        "I am an AI assistant": "હું એક AI સહાયક છું",
        "Please consult a lawyer": "કૃપા કરીને વકીલની સલાહ લો",
        "for serious or urgent matters": "ગંભીર અથવા તાત્કાલિક બાબતો માટે",
        "How can I help you today?": "હું આજે તમને કેવી રીતે મદદ કરી શકું?",
        "Rights during arrest": "ધરપકડ દરમિયાન અધિકારો",
        "How to file an FIR?": "FIR કેવી રીતે નોંધાવી શકાય?",
        "Consumer complaint process": "ગ્રાહક ફરિયાદ પ્રક્રિયા",
        "RTI application procedure": "RTI અરજી પ્રક્રિયા",
        "Legal Documents": "કાનૂની દસ્તાવેજો",
        "Legal Timelines": "કાનૂની સમયરેખા",
        "Nearby Resources": "નજીકના સંસાધનો",
        "Ask a legal question...": "કાનૂની પ્રશ્ન પૂછો..."
    }
}

def translate_to_language(text, target_language):
    """
    Translate text to the target language using our translation dictionary
    
    Args:
        text (str): The text to translate
        target_language (str): The target language code (e.g. 'hindi', 'bengali')
        
    Returns:
        str: The translated text, or original text if translation not available
    """
    # Return original text for English or Hinglish
    if target_language == 'English' or target_language == 'Hinglish':
        return text
    
    target_language = target_language.lower()
    
    # Checking if translations available for target language
    if target_language in LANGUAGE_TRANSLATIONS:
        translations = LANGUAGE_TRANSLATIONS[target_language]
        
        # Replace English phrases with their translations
        for english, translated in translations.items():
            text = text.replace(english, translated)
            
            # Also try case-insensitive replacement for common phrases
            if english.lower() != english:
                text = text.replace(english.lower(), translated)
                text = text.replace(english.capitalize(), translated)
                
    return text

# Add more advanced language detection function
def detect_language(text):
    """
    Simple language detection based on character analysis
    
    Args:
        text (str): The text to analyze
        
    Returns:
        str: Detected language code
    """
    # Character ranges for different scripts
    devanagari_range = (0x0900, 0x097F)  # Hindi
    bengali_range = (0x0980, 0x09FF)  # Bengali
    tamil_range = (0x0B80, 0x0BFF)  # Tamil
    telugu_range = (0x0C00, 0x0C7F)  # Telugu
    kannada_range = (0x0C80, 0x0CFF)  # Kannada
    gujarati_range = (0x0A80, 0x0AFF)  # Gujarati
    
    # Counting characters in each script
    counts = {
        'english': 0,
        'hindi': 0,
        'bengali': 0,
        'tamil': 0,
        'telugu': 0,
        'kannada': 0,
        'gujarati': 0,
        'marathi': 0 
    }
    
    for char in text:
        code = ord(char)
        if 0x0020 <= code <= 0x007F:
            counts['english'] += 1
        elif devanagari_range[0] <= code <= devanagari_range[1]:
            counts['hindi'] += 1
            counts['marathi'] += 1
        elif bengali_range[0] <= code <= bengali_range[1]:
            counts['bengali'] += 1
        elif tamil_range[0] <= code <= tamil_range[1]:
            counts['tamil'] += 1
        elif telugu_range[0] <= code <= telugu_range[1]:
            counts['telugu'] += 1
        elif kannada_range[0] <= code <= kannada_range[1]:
            counts['kannada'] += 1
        elif gujarati_range[0] <= code <= gujarati_range[1]:
            counts['gujarati'] += 1
    
    # Get the  language with most character matches to find my right language
    max_lang = max(counts.items(), key=lambda x: x[1])
    
    if max_lang[0] == 'marathi' and counts['hindi'] == counts['marathi']:
        return 'hindi'
    
    if max_lang[1] < 5 or (max_lang[0] != 'english' and max_lang[1] < 10):
        if counts['english'] > 10 and counts['hindi'] > 3:
            return 'hinglish'
        return 'english'
        
    return max_lang[0]

def get_legal_terms_in_language(language_code):
    """
    Get common legal terms in the specified language
    
    Args:
        language_code (str): The language code (e.g. 'hindi', 'bengali')
        
    Returns:
        dict: Dictionary mapping English legal terms to translations
    """
    legal_terms = {
        "court": "",
        "lawyer": "",
        "judge": "",
        "appeal": "",
        "arrest": "",
        "bail": "",
        "complaint": "",
        "evidence": "",
        "hearing": "",
        "rights": "",
        "witness": "",
        "document": "",
        "penalty": "",
        "testimony": "",
        "trial": ""
    }
    
    hindi_terms = {
        "court": "न्यायालय",
        "lawyer": "वकील",
        "judge": "न्यायाधीश",
        "appeal": "अपील",
        "arrest": "गिरफ्तारी",
        "bail": "जमानत",
        "complaint": "शिकायत",
        "evidence": "सबूत",
        "hearing": "सुनवाई",
        "rights": "अधिकार",
        "witness": "गवाह",
        "document": "दस्तावेज़",
        "penalty": "दंड",
        "testimony": "गवाही",
        "trial": "मुकदमा"
    }
    
    bengali_terms = {
        "court": "আদালত",
        "lawyer": "আইনজীবী",
        "judge": "বিচারক",
        "appeal": "আপিল",
        "arrest": "গ্রেপ্তার",
        "bail": "জামিন",
        "complaint": "অভিযোগ",
        "evidence": "প্রমাণ",
        "hearing": "শুনানি",
        "rights": "অধিকার",
        "witness": "সাক্ষী",
        "document": "নথি",
        "penalty": "জরিমানা",
        "testimony": "সাক্ষ্য",
        "trial": "বিচার"
    }
    
    language_maps = {
        "hindi": hindi_terms,
        "bengali": bengali_terms,
    }

    return language_maps.get(language_code.lower(), {})

# Function to check text for legal jargon and list all technical terms found
def identify_legal_jargon(text, language='english'):
    """
    Identify legal jargon in text
    
    Args:
        text (str): Text to analyze
        language (str): Language of the text
        
    Returns:
        list: List of legal jargon terms found in the text
    """
    from legal_data import LEGAL_JARGON
    
    found_terms = []
    
    if language.lower() == 'english':
        for term in LEGAL_JARGON.keys():
            if term.lower() in text.lower():
                found_terms.append(term)
    
    return found_terms